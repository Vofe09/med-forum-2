{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/forum2/lib/db.js"],"sourcesContent":["import mysql from \"mysql2/promise\";\r\n\r\nlet pool;\r\n\r\nif (!pool) {\r\n    pool = mysql.createPool({\r\n        host: process.env.DB_HOST,\r\n        port: process.env.DB_PORT || 4000,\r\n        user: process.env.DB_USER,\r\n        password: process.env.DB_PASS,\r\n        database: process.env.DB_NAME,\r\n        ssl: {\r\n            rejectUnauthorized: true\r\n        }\r\n    });\r\n}\r\n\r\nexport default pool;\r\n// "],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI;AAEJ,IAAI,CAAC,MAAM;IACP,OAAO,sIAAK,CAAC,UAAU,CAAC;QACpB,MAAM,QAAQ,GAAG,CAAC,OAAO;QACzB,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;QAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO;QACzB,UAAU,QAAQ,GAAG,CAAC,OAAO;QAC7B,UAAU,QAAQ,GAAG,CAAC,OAAO;QAC7B,KAAK;YACD,oBAAoB;QACxB;IACJ;AACJ;uCAEe;CACf,GAAG"}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///C:/forum2/pages/api/categories/index.js"],"sourcesContent":["import db from '../../../lib/db';\r\n\r\nexport default async function handler(req, res) {\r\n  if (req.method === 'GET') {\r\n    try {\r\n      const [rows] = await db.query('SELECT * FROM categories ORDER BY created_at DESC');\r\n      res.status(200).json(rows);\r\n    } catch (error) {\r\n      console.error(error);\r\n      res.status(500).json({ message: 'Ошибка при получении категорий' });\r\n    }\r\n  } else if (req.method === 'POST') {\r\n    // Создание новой категории\r\n    const { title, description, slug } = req.body;\r\n    if (!title || !slug) return res.status(400).json({ message: 'Title и slug обязательны' });\r\n\r\n    try {\r\n      const [result] = await db.query(\r\n        'INSERT INTO categories (title, description, slug) VALUES (?, ?, ?)',\r\n        [title, description || '', slug]\r\n      );\r\n      res.status(201).json({ id: result.insertId, title, description, slug });\r\n    } catch (error) {\r\n      console.error(error);\r\n      res.status(500).json({ message: 'Ошибка при создании категории' });\r\n    }\r\n  } else {\r\n    res.status(405).json({ message: 'Метод не разрешён' });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,IAAI;YACF,MAAM,CAAC,KAAK,GAAG,MAAM,6GAAE,CAAC,KAAK,CAAC;YAC9B,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QACvB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,SAAS;YAAiC;QACnE;IACF,OAAO,IAAI,IAAI,MAAM,KAAK,QAAQ;QAChC,2BAA2B;QAC3B,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,GAAG,IAAI,IAAI;QAC7C,IAAI,CAAC,SAAS,CAAC,MAAM,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAA2B;QAEvF,IAAI;YACF,MAAM,CAAC,OAAO,GAAG,MAAM,6GAAE,CAAC,KAAK,CAC7B,sEACA;gBAAC;gBAAO,eAAe;gBAAI;aAAK;YAElC,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,IAAI,OAAO,QAAQ;gBAAE;gBAAO;gBAAa;YAAK;QACvE,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,SAAS;YAAgC;QAClE;IACF,OAAO;QACL,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAoB;IACtD;AACF"}}]
}