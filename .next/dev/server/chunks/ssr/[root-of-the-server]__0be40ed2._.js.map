{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/forum2/pages/index.js"],"sourcesContent":["// pages/forum/index.js\nimport { useState, useEffect } from \"react\";\n\nexport default function ForumPage() {\n  const [loginModalOpen, setLoginModalOpen] = useState(false);\n  const [registerModalOpen, setRegisterModalOpen] = useState(false);\n\n  const [loginEmail, setLoginEmail] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n\n  const [regUsername, setRegUsername] = useState(\"\");\n  const [regEmail, setRegEmail] = useState(\"\");\n  const [regPassword, setRegPassword] = useState(\"\");\n  const [regPassword2, setRegPassword2] = useState(\"\");\n\n  const [threads, setThreads] = useState([]);\n\n  // ======== LOAD THREADS =========\n  useEffect(() => {\n    fetch(\"/api/forum/getThreads\")\n      .then(r => r.json())\n      .then(data => setThreads(data.threads || []))\n      .catch(err => console.log(err));\n  }, []);\n\n  // ======== LOGIN =========\n  const handleLogin = async () => {\n    if (!loginEmail || !loginPassword) return alert(\"Заполните все поля\");\n    try {\n      const res = await fetch(\"/api/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email: loginEmail, password: loginPassword }),\n      });\n      const data = await res.json();\n      if (res.ok) {\n        alert(\"Вход выполнен: \" + data.username);\n        setLoginModalOpen(false);\n      } else {\n        alert(data.message || \"Ошибка при входе\");\n      }\n    } catch (err) {\n      console.error(err);\n      alert(\"Сервер недоступен\");\n    }\n  };\n\n  // ======== REGISTER =========\n  const handleRegister = async () => {\n    if (!regUsername || !regEmail || !regPassword || !regPassword2)\n      return alert(\"Заполните все поля\");\n    if (regPassword !== regPassword2) return alert(\"Пароли не совпадают\");\n\n    try {\n      const res = await fetch(\"/api/register\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          username: regUsername,\n          email: regEmail,\n          password: regPassword,\n        }),\n      });\n      const data = await res.json();\n      if (res.ok) {\n        alert(\"Регистрация успешна! Войдите в систему.\");\n        setRegisterModalOpen(false);\n      } else {\n        alert(data.message || \"Ошибка при регистрации\");\n      }\n    } catch (err) {\n      console.error(err);\n      alert(\"Сервер недоступен\");\n    }\n  };\n\n  return (\n    <div style={{ background: \"#e6f8f7\", minHeight: \"100vh\", fontFamily: \"Arial, sans-serif\" }}>\n\n      {/* ======== TOP BAR ======== */}\n      <div style={{\n        width: \"100%\",\n        padding: \"15px 30px\",\n        background: \"#4fd1c5\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        boxShadow: \"0 4px 12px rgba(0,0,0,0.2)\",\n        position: \"sticky\",\n        top: 0,\n        zIndex: 100\n      }}>\n        <div style={{ fontSize: 24, fontWeight: \"bold\", color: \"white\" }}>\n          MED.UNIT — Форум\n        </div>\n        <div>\n          <button onClick={() => setLoginModalOpen(true)} style={{ background: \"white\", color: \"#1f7a73\", border: \"none\", padding: \"10px 18px\", borderRadius: 12, marginLeft: 10, cursor: \"pointer\", fontWeight: \"bold\" }}>\n            Вход\n          </button>\n          <button onClick={() => setRegisterModalOpen(true)} style={{ background: \"white\", color: \"#1f7a73\", border: \"none\", padding: \"10px 18px\", borderRadius: 12, marginLeft: 10, cursor: \"pointer\", fontWeight: \"bold\" }}>\n            Регистрация\n          </button>\n        </div>\n      </div>\n\n      {/* ======== FORUM CONTENT ======== */}\n      <div style={{\n        width: \"60%\",\n        margin: \"40px auto\",\n        background: \"rgba(255,255,255,0.5)\",\n        padding: 25,\n        borderRadius: 20,\n        backdropFilter: \"blur(10px)\",\n        boxShadow: \"0 8px 20px rgba(0,0,0,0.15)\"\n      }}>\n        <div style={{ fontSize: 28, fontWeight: \"bold\", color: \"#1f7a73\", textAlign: \"center\", marginBottom: 20 }}>\n          Темы форума\n        </div>\n\n        <div style={{ marginTop: 20 }}>\n          <button\n            onClick={() => window.location.href = \"/forum/new\"}\n            style={{\n              background: \"#4fd1c5\",\n              color: \"white\",\n              border: \"none\",\n              padding: \"10px 18px\",\n              borderRadius: 12,\n              cursor: \"pointer\",\n              fontWeight: \"bold\",\n              marginBottom: 20\n            }}\n          >\n            ➕ Создать новую тему\n          </button>\n\n          {threads.length === 0 && (\n            <p style={{ color: \"#1e293b\", fontSize: 18, textAlign: \"center\" }}>\n              Тем пока нет. Создайте первую!\n            </p>\n          )}\n\n          {threads.map(t => (\n            <div\n              key={t.id}\n              onClick={() => window.location.href = `/forum/${t.id}`}\n              style={{\n                background: \"white\",\n                padding: 18,\n                borderRadius: 12,\n                marginBottom: 12,\n                cursor: \"pointer\",\n                boxShadow: \"0 4px 12px rgba(0,0,0,0.1)\"\n              }}\n            >\n              <div style={{ fontSize: 20, fontWeight: \"bold\", color: \"#1f7a73\" }}>\n                {t.title}\n              </div>\n              <div style={{ fontSize: 14, color: \"#475569\" }}>\n                Автор: {t.author} | {new Date(t.createdAt).toLocaleString()}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* ======== LOGIN MODAL ======== */}\n      {loginModalOpen && (\n        <div style={{ position: \"fixed\", top: 0, left: 0, width: \"100%\", height: \"100%\", background: \"rgba(0,0,0,0.4)\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", zIndex: 200 }}>\n          <div style={{ width: 350, background: \"white\", padding: 25, borderRadius: 20, textAlign: \"center\", boxShadow: \"0 8px 20px rgba(0,0,0,0.3)\" }}>\n            <h3 style={{ marginBottom: 15, color: \"#1f7a73\" }}>Вход</h3>\n            <input type=\"text\" placeholder=\"Логин\" value={loginEmail} onChange={e => setLoginEmail(e.target.value)} style={{ width: \"90%\", padding: 12, margin: 8, borderRadius: 10, border: \"1px solid #4fd1c5\", fontSize: 16 }} />\n            <input type=\"password\" placeholder=\"Пароль\" value={loginPassword} onChange={e => setLoginPassword(e.target.value)} style={{ width: \"90%\", padding: 12, margin: 8, borderRadius: 10, border: \"1px solid #4fd1c5\", fontSize: 16 }} />\n            <button onClick={handleLogin} style={{ width: \"95%\", padding: 12, marginTop: 12, background: \"#4fd1c5\", border: \"none\", color: \"white\", fontSize: 18, borderRadius: 12, cursor: \"pointer\" }}>Войти</button>\n            <div style={{ marginTop: 10, cursor: \"pointer\", fontSize: 14, color: \"#1f7a73\" }} onClick={() => setLoginModalOpen(false)}>Закрыть</div>\n          </div>\n        </div>\n      )}\n\n      {/* ======== REGISTER MODAL ======== */}\n      {registerModalOpen && (\n        <div style={{ position: \"fixed\", top: 0, left: 0, width: \"100%\", height: \"100%\", background: \"rgba(0,0,0,0.4)\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", zIndex: 200 }}>\n          <div style={{ width: 350, background: \"white\", padding: 25, borderRadius: 20, textAlign: \"center\", boxShadow: \"0 8px 20px rgba(0,0,0,0.3)\" }}>\n            <h3 style={{ marginBottom: 15, color: \"#1f7a73\" }}>Регистрация</h3>\n            <input type=\"text\" placeholder=\"Логин\" value={regUsername} onChange={e => setRegUsername(e.target.value)} style={{ width: \"90%\", padding: 12, margin: 8, borderRadius: 10, border: \"1px solid #4fd1c5\", fontSize: 16 }} />\n            <input type=\"email\" placeholder=\"Email\" value={regEmail} onChange={e => setRegEmail(e.target.value)} style={{ width: \"90%\", padding: 12, margin: 8, borderRadius: 10, border: \"1px solid #4fd1c5\", fontSize: 16 }} />\n            <input type=\"password\" placeholder=\"Пароль\" value={regPassword} onChange={e => setRegPassword(e.target.value)} style={{ width: \"90%\", padding: 12, margin: 8, borderRadius: 10, border: \"1px solid #4fd1c5\", fontSize: 16 }} />\n            <input type=\"password\" placeholder=\"Повторите пароль\" value={regPassword2} onChange={e => setRegPassword2(e.target.value)} style={{ width: \"90%\", padding: 12, margin: 8, borderRadius: 10, border: \"1px solid #4fd1c5\", fontSize: 16 }} />\n            <button onClick={handleRegister} style={{ width: \"95%\", padding: 12, marginTop: 12, background: \"#4fd1c5\", border: \"none\", color: \"white\", fontSize: 18, borderRadius: 12, cursor: \"pointer\" }}>Создать аккаунт</button>\n            <div style={{ marginTop: 10, cursor: \"pointer\", fontSize: 14, color: \"#1f7a73\" }} onClick={() => setRegisterModalOpen(false)}>Закрыть</div>\n          </div>\n        </div>\n      )}\n\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}